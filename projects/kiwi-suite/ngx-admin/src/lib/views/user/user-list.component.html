<div class="card card-accent-primary" *ngIf="schema$ | async as schema">
    <div class="card-header">
        <b class="text-muted">{{ resourceNamePlural$ | async }}</b>
        <div class="card-actions">
            <a routerLink="/{{ resourceKey }}/create"
               *can="['admin.api.'+resourceKey+'.create']">
                <i class="fa fa-plus"></i>
            </a>
        </div>
    </div>
    <div class="card-body">
        <ngx-datatable
                class="bootstrap expandable"
                #dataTable
                [rows]="models$ | async"
                [loadingIndicator]="loadingIndicator"
                [columnMode]="'force'"
                [rowHeight]="'auto'"
                [headerHeight]="50"
                [footerHeight]="50"
                [limit]="limit"
                [reorderable]="reorderable">
            <!--(page)="onPage($event)"-->

            <ngx-datatable-column
                    prop="avatar"
                    [width]="50"
                    [resizeable]="false"
                    [sortable]="false"
                    [draggable]="false"
                    [canAutoResize]="false">
                <ng-template let-column="column" ngx-datatable-header-template>
                    <span class="">
                        <!--{{column.name}}-->
                    </span>
                </ng-template>
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <span class="d-none d-md-block">
                        <img style="width:24px;height:24px;" *ngIf="value"
                             [src]="sanitizeUrl('data:image/svg+xml;utf8,' + value )" [alt]="row.name">
                    </span>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column prop="email" name="E-Mail">
                <ng-template let-column="column" ngx-datatable-header-template>
                    <span class="">
                        {{column.name}}
                    </span>
                </ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <span class="">
                        {{value}}
                    </span>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column prop="role">
                <ng-template let-column="column" ngx-datatable-header-template>
                    <span class="">
                        {{column.name}}
                    </span>
                </ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <span class="badge badge-success">
                        {{value | uppercase}}
                    </span>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column prop="id"
                                  [resizeable]="false">
                <ng-template let-column="column" ngx-datatable-header-template>
                    <span class="">
                        {{column.id}}
                    </span>
                </ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <div class="text-right">
                        <a routerLink="/{{ resourceKey }}/{{ value }}/edit" class="btn btn-sm btn-primary"
                           *can="['admin.api.'+resourceKey+'.edit']">
                            <i class="fa fa-pencil"></i>
                        </a>
                    </div>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </div>
</div>
