<div class="modal-header bg-primary">
  <h5 class="modal-title">Select a Link</h5>
</div>

<div class="modal-header d-block">
  <div class="row">
    <div class="col-sm-8">
      <ng-select [items]="linkTypes" bindValue="name" [(ngModel)]="selectedType" [clearable]="false" (change)="onTypeSelect()"></ng-select>
    </div>
    <div class="col-sm">
      <ng-select [items]="targetTypes" bindValue="name" [(ngModel)]="selectedTarget" [clearable]="false"></ng-select>
    </div>
  </div>
</div>

<ng-container *ngIf="selectedType === 'media'">
  <div class="current-media" *ngIf="value && value.value && value.type === 'media'">
    <div class="row align-items-center">
      <div class="col-auto text-center">
        <ng-container *ngIf="isImage(value.value.mimeType); else noImage">
          <span class="transparent-img-bg border-radius"><img [src]="value.value.thumb" class="img-fluid"/></span>
        </ng-container>
        <ng-template #noImage class="media-container"><i
          [class]="'fa fa-2x fa-fw ' + mimeTypeIcon(value.value.mimeType)"></i></ng-template>
      </div>
      <div class="col">
        <b>Current File:</b><br/>
        {{ value.value.filename }}
      </div>
    </div>
  </div>
  <kiwi-media-list class="media-inline" (select)="onSelectType($event)"></kiwi-media-list>
</ng-container>

<ng-container *ngFor="let configLinkType of configLinkTypes">
  <ng-container *ngIf="selectedType === configLinkType.type && selectItems[selectedType]">
    <div class="modal-body">
      <div class="row align-items-center">
        <div class="col-sm">
          <ng-select [items]="selectItems[selectedType]" [(ngModel)]="selectedItem[selectedType]" bindLabel="name"
                     (change)="onConfigTypeSelect(configLinkType)">
          </ng-select>
        </div>
        <div class="col-sm-4 mt-2 mt-sm-0" *ngIf="configLinkType.hasLocales && locales.length > 1">
          <ng-select [items]="locales" bindLabel="name" bindValue="locale" [(ngModel)]="selectedLocale"
                     [clearable]="false" (change)="onChangeLocale(configLinkType)"></ng-select>
        </div>
      </div>
    </div>
  </ng-container>
</ng-container>


<ng-container *ngIf="selectedType === 'external'">
  <div class="modal-body">
    <input type="text" placeholder="Enter URL of external Link (http://...)" class="form-control"
           [(ngModel)]="externalLinkInputValue">
  </div>
  <div class="modal-footer text-right">
    <button type="button" class="btn btn-primary" (click)="onSelectType(externalLinkInputValue);"><i
      class="fa fa-check"></i> Select
    </button>
  </div>
</ng-container>
